# ì…ì‹¤ ì²´í¬ í•´ì£¼ì„¸ìš” !! ğŸ’Œ
1. Intellij
2. Visual Studio Code
3. MariaDB - HeidiSQL
4. Postman
5. ì˜¤ëŠ˜ë¶„ê¹Œì§€ì˜ í”„ë¡œì íŠ¸ ê°•ì‚¬ ê¹ƒí—ˆë¸Œì—ì„œ ë‹¤ìš´ë¡œë“œ

# ê¸ˆì¼ ìˆ˜ì—… ê³„íš
1. RESTful API ë¬¸ì„œí™” - ì—¬ê¸°ê¹Œì§€ cardatabase # 1
2. ë°±ì—”ë“œ ë³´í˜¸ - cardatabase # 2 ë§Œë“¤ì–´ì„œ í• ê²ë‹ˆë‹¤.
3. ë°±ì—”ë“œ test case - cardatabase # 3 ë§Œë“¤ê±´ë°, ì´ë•Œë§Œ ì“°ê³  # 2 ê¸°ì¤€ìœ¼ë¡œ ë°±ì—”ë“œ-í”„ë¡ íŠ¸ì—”ë“œ ì—°ê²° ì˜ˆì •

# RESTful API ë¬¸ì„œí™”
- RESTful APIëŠ” ì´ë¥¼ ì´ìš©í•˜ëŠ” ê°œë°œìê°€ ê·¸ ê¸°ëŠ¥ê³¼ ì‘ë™ì„ ì´í•´í•  ìˆ˜ ìˆë„ë¡ ì ì ˆí•˜ê²Œ ë¬¸ì„œí™” ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
- ë‚´ê°€ ê°œë°œí•˜ëŠ”ë° ì™œ ë¬¸ì„œê°€ í•„ìš”í•˜ëƒê³  í•˜ì‹œë©´ ì•ˆë©ë‹ˆë‹¤... 
- ì´ë²ˆì—ëŠ” Open API 3 ë¥¼ ì´ìš©í•˜ì—¬ ì´ìš©í•  ìˆ˜ ìˆëŠ” ì—”ë“œí¬ì¸íŠ¸ ëª©ë¡ / í—ˆìš©ë˜ëŠ” ë°ì´í„° ì–‘ì‹ / APIì™€ ìƒí˜¸ì‘ìš©í•˜ëŠ” ë°©ë²• ë“±ì„ í¬í•¨ì‹œí‚¬ ì˜ˆì •ì…ë‹ˆë‹¤.

OpenAPI3ë¥¼ ì´ìš©í•œ ìë™ ë¬¸ì„œ ìƒì„± ë°©ì‹(ì´ì „ì—ëŠ” Swagger ëª…ì„¸ë¼ê³  í–ˆìŠµë‹ˆë‹¤)ì¸ë°, ì´ëŠ” RESTful APIë¥¼ ìœ„í•œ API ì„¤ëª… ëª…ì„¸ì„œì— í•´ë‹¹í•©ë‹ˆë‹¤. RAMLë„ ìˆê¸°ëŠ”í•œë° í•œêµ­ì—ì„œëŠ” ì˜ ì•ˆì“°ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤.

OpenAPIë„ ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤.
1. SpringDoc OpenAPI Starter WebMVC UI ì–˜ ì“¸ê²ë‹ˆë‹¤.
`	implementation 'org.springdoc:springdoc-openapi-starter-webmvc-ui:2.0.2'`

ì´ì œ ì•„ì…”ì•¼ ë  ì ì€ 'ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬'ë¥¼ ì‚¬ìš©í•œë‹¤ë©´ Java ìì²´ë¥¼ ì´ìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— _ì˜ì¡´ì„± ì¶”ê°€_ ê°€ ì„ í–‰ë¼ì•¼ í•œë‹¤ëŠ” ì ì…ë‹ˆë‹¤.
ê·¸ëŸ¼ ì˜ì¡´ì„± ì¶”ê°€ëŠ” ì–´ë””ì„œ í•œë‹¤ ? -> build.gradleì—ì„œ í•œë‹¤. -> ì—¬ê¸° dependencies ìˆ˜ì •í–ˆë‹¤ë©´? -> ì½”ë¼ë¦¬ ëˆŒëŸ¬ì•¼ í•œë‹¤.

2. com.example.cardatabase íŒ¨í‚¤ì§€ì— OpenApiConfig í´ë˜ìŠ¤ë¥¼ ìƒì„±. ì €ëŠ” ì¢…ì¢… Configì™€ ê´€ë ¨ëœ í‘œí˜„ì„ ì›¬ë§Œí•˜ë©´ ì˜ì–´ë¡œ ê·¸ëŒ€ë¡œ ì“¸ê±´ë° í˜¹ì‹œ êµ¬ì„± ì´ë¼ê³  ì´ì•¼ê¸°í•˜ë©´ configì´ë¼ê³  ìƒê°í•˜ì‹œë©´ ë˜ê² ìŠµë‹ˆë‹¤.

```java
package com.example.cardatabase;

import io.swagger.v3.oas.models.OpenAPI;
import io.swagger.v3.oas.models.info.Info;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class OpenApiConfig {
    
    @Bean
    public OpenAPI carDatabaseOpenApi() {
        return new OpenAPI()
                .info(new Info()
                        .title("Car REST API")
                        .description("My car Stock")
                        .version("1.0")
                );
    }
}
```
ì´ìƒì˜ ì½”ë“œì—ì„œ í•™ìŠµí•´ì•¼ í•  ë¶€ë¶„ì€ `@Bean`ì´ë¼ëŠ” ì• ë„ˆí…Œì´ì…˜ì…ë‹ˆë‹¤. 
ê·¸ë¦¬ê³  return new OpenApi.info(...); ë¼ëŠ” ì§€ì ì—ì„œ chaining method ê°œë…ì„ ë„ì…í–ˆê³ , ê±°ê¸° new Info() ë‚´ì—ì„œ ê°ì²´ ìƒì„±ì„ ë¹Œë” íŒ¨í„´ìœ¼ë¡œ í–ˆë‹¤ëŠ” ì ì— ì£¼ëª©í•˜ì‹œë©´ ë©ë‹ˆë‹¤. ê·¸ëŸ¬ë©´ `@Bean` ë¹¼ê³ ëŠ” ì „ë¶€ ë‹¤ í•™ìŠµí•œ ë‚´ìš©ì…ë‹ˆë‹¤.

3. application.propertiesë„ ìˆ˜ì •í• ê²ë‹ˆë‹¤.

```property
spring.application.name=cardatabase
spring.datasource.url=jdbc:mariadb://localhost:3310/cardb
spring.datasource.username=root
spring.datasource.password=1234
spring.datasource.driver-class-name=org.mariadb.jdbc.Driver
spring.jpa.generate-ddl=true
spring.jpa.hibernate.ddl-auto=create-drop
spring.data.rest.basePath=/api
springdoc.swagger-ui.enabled=true
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.api-docs.path=/api-docs
```

ì´í›„
http://localhost:8080/swagger-ui.html


# Bean / @Bean
- Springì—ì„œ Beanì€ ìŠ¤í”„ë§ IoC(Inversion of Control : ì œì–´ì˜ ì—­ì „) ì»¨í…Œì´ë„ˆê°€ ê´€ë¦¬í•˜ëŠ” Java ê°ì²´ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. 

## Beanì˜ ì •ì˜
Springì´ ë“±ì¥í•˜ê¸° ì „ì—ëŠ” ê°œë°œìê°€ ì§ì ‘ new í‚¤ì›Œë“œë¥¼ í†µí•œ ê°ì²´ ìƒì„±ì„ í•˜ê³ , ê°ì²´ ê°„ì˜ ì˜ì¡´ì„±ì„ ê´€ë¦¬í–ˆì—ˆìŠµë‹ˆë‹¤(ìš°ë¦¬ê°€ Java ì‹œê°„ì— í•´ì™”ë˜ ê²ë‹ˆë‹¤). ì–˜ê°€ í¸í•˜ê²Œ ëŠê»´ì§€ì‹œê¸°ëŠ” í• ê±´ë° í”„ë¡œì íŠ¸ê°€ ì»¤ì§ˆ ìˆ˜ë¡ ì½”ë“œê°€ ë³µì¡í•´ì§€ê³  ìœ ì§€ ë³´ìˆ˜ê°€ ì–´ë ¤ì›Œì§€ëŠ” ë‹¨ì ì´ ìˆìŠµë‹ˆë‹¤.
ì˜ˆë¥¼ ë“¤ì–´ A í´ë˜ìŠ¤ë¥¼ ì •ì˜í•˜ê³  B í´ë˜ìŠ¤ì—ì„œ A í´ë˜ìŠ¤ì˜ ê°ì²´ë¥¼ ë§Œë“¤ì—ˆì„ ë•Œ, A í´ë˜ìŠ¤ì˜ ë‚´ë¶€ë¥¼ ìˆ˜ì •í–ˆë”ë‹ˆ Bì—ì„œ ì½”ë“œ ì˜¤ë¥˜ê°€ ë‚˜ëŠ” ê²½ìš°ê°€ ë¹ˆë²ˆí–ˆë˜ ê²ë‹ˆë‹¤.

Springì—ì„œëŠ” ì´ìƒì˜ ë¬¸ì œë¥¼ IoC ê°œë…ì„ í†µí•´ì„œ í•´ê²°í–ˆìŠµë‹ˆë‹¤. ê°œë°œìê°€ ì§ì ‘ íŠ¹ì • í´ë˜ìŠ¤ì—ì„œ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ Spring IoC ì»¨í…Œì´ë„ˆì—ê²Œ ê°ì²´ ìƒì„± ìì²´ë¥¼ ìœ„ì„í•©ë‹ˆë‹¤. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í•„ìš”í•œ ê°ì²´ë“¤ì„ ë¯¸ë¦¬ ìƒì„±í•´ë‘ê³ (Bean), í•„ìš”í•  ë•Œ íŠ¹ì • í´ë˜ìŠ¤ì—ê²Œ ì£¼ì…ì„ í•´ì¤ë‹ˆë‹¤. ì´ë ‡ê²Œ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ì˜í•´ ê´€ë¦¬ë˜ëŠ” ê°ì²´ë¥¼ _ë¹ˆ_ ì´ë¼ê³  í•©ë‹ˆë‹¤.

ê·¸ë¦¬ê³  ì´ beanì€ ì‹±ê¸€í†¤ ìŠ¤ì½”í”„ë¡œ ê´€ë¦¬ë©ë‹ˆë‹¤. ê·¸ëŸ¬ë©´ ì „ì²´ë¥¼ í†µí‹€ì–´ì„œ í•˜ë‚˜ì˜ ê°ì²´ë§Œ ìƒì„±ë˜ëŠ” ê²ƒì„ ë‹´ë³´í•˜ê¸° ë•Œë¬¸ì— ë©”ëª¨ë¦¬ íš¨ìœ¨ì„±ì„ ë†’ì´ê³  ì¼ê´€ëœ ìƒíƒœë¥¼ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## @Bean ì• ë„ˆí…Œì´ì…˜
`@Bean` ì• ë„ˆí…Œì´ì…˜ì€ ë©”ì„œë“œì— ë¶™ì—¬ì„œ ì‚¬ìš©í•˜ë©°, ì´ ë©”ì„œë“œê°€ ë°˜í™˜í•˜ëŠ” ê°ì²´ë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ê² ë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤.

### @Bean ì• ë„ˆí…Œì´ì…˜ ì‚¬ìš© ë°©ë²•
`@Bean`ì€ ì£¼ë¡œ `@Configuration`ì´ ë¶™ì€ í´ë˜ìŠ¤ ë‚´ë¶€ì˜ ë©”ì„œë“œì—ì„œ ì‚¬ìš©ë©ë‹ˆë‹¤. `@Confiuration`ì€ í•´ë‹¹ í´ë˜ìŠ¤ê°€ ë¹ˆ ì„¤ì • ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆìŒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.

- ìš°ë¦¬ê°€ OpenAPIë¥¼ ë„ì…í–ˆì„ ë•Œì˜ ì• ë„ˆí…Œì´ì…˜ì„ í™•ì¸í•˜ì‹œë©´ ë©ë‹ˆë‹¤.
```java
package com.example.cardatabase;

import io.swagger.v3.oas.models.OpenAPI;
import io.swagger.v3.oas.models.info.Info;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class OpenApiConfig {

    @Bean
    public OpenAPI carDatabaseOpenApi() {
        return new OpenAPI()
                .info(new Info()
                        .title("Car REST API")
                        .description("My car Stock")
                        .version("1.0")
                );
    }
}
```

### @Beanì˜ ì‚¬ìš© ì—¬ë¶€ì— ë”°ë¥¸ ì½”ë“œ ë¼ì¸ì˜ ì°¨ì´
1. @Beanì„ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ì„ ë•Œì˜ ì˜ˆì‹œ
  - @Beanì„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ ê°œë°œìê°€ ì§ì ‘ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•©ë‹ˆë‹¤.

```java
public class MyService {
  public void doSomething() {
    System.out.println("ì´ methodê°€ ë¬´ìŠ¨ ì§“ì„ í•˜ê³  ìˆìŠµë‹ˆë‹¤.");
  }
}

public class MyController {
  // ê°œë°œìê°€ ì§ì ‘ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ê¸° ìœ„í•´ì„œ ê°ì²´ë¥¼ ìƒì„±í–ˆìŠµë‹ˆë‹¤.

  // í•„ë“œ ë“±ë¡
  private Myservice myservice;

  public MyService() {
    myService = new MyService();
  }

  public void handleRequest() {
    myService1.doSomething();// MyController í´ë˜ìŠ¤ì—ì„œ MyService ê°ì²´ë¥¼ ë§Œë“  ë‹¤ìŒì— ë©”ì„œë“œë¥¼ í˜¸ì¶œí–ˆìŠµë‹ˆë‹¤.
  }
}
```
ê·¸ëŸ¬ë©´ í˜„ì¬ê¹Œì§€ì˜ ì €í¬ê°€ ë´¤ì„ ë•ŒëŠ” ì „í˜€ ì „í˜€ ì „í˜€ ì´ìƒí•œê²Œ ì—†ìŠµë‹ˆë‹¤. ì—¬íƒœê¹Œì§€ ê·¸ë ‡ê²Œ í•´ì™”ìœ¼ë‹ˆê¹Œìš”.

ì´ìƒì˜ ë°©ì‹ì€ ì˜ì¡´ì„± ì£¼ì…(Dependency Injection)ì„ í™œìš©í•˜ì§€ ì•Šì•„, ê°ì²´ ê°„ì˜ ê²°í•©ë„ê°€ ë†’ì•„ì§€ê³  í…ŒìŠ¤íŠ¸ ë° ìœ ì§€ ë³´ìˆ˜ê°€ ì–´ë µë‹¤ëŠ” ë‹¨ì ì´ ìˆìŠµë‹ˆë‹¤. ì¦‰ MyConroller í´ë˜ìŠ¤ë§Œ í…ŒìŠ¤íŠ¸ë¥¼ í•´ë³´ê³  ì‹¶ì–´ë„ ë‚´ë¶€ì—ì„œ MyService ê°ì²´ë¥¼ ë§Œë“¤ì–´ë²„ë¦¬ë‹ˆê¹Œ MyService í´ë˜ìŠ¤ê¹Œì§€ ë¬´ì¡°ê±´ ê°™ì´ í…ŒìŠ¤íŠ¸ë¥¼ í•´ì•¼í•œë‹¤ëŠ” ë¶€ë¶„ì´ ë¬¸ì œì…ë‹ˆë‹¤. ë§Œì•½ì— íŠ¹ì • í´ë˜ìŠ¤ì—ì„œ ë‹¤ë¥¸ í´ë˜ìŠ¤ì˜ ê°ì²´ë¥¼ 300ê°œ ë§Œë“¤ë©´ 301ê°œì˜ í´ë˜ìŠ¤ë¥¼ í…ŒìŠ¤íŠ¸í•´ë´ì•¼ê² ì£ .

2. @Beanì„ ì‚¬ìš©í–ˆì„ ë•Œì˜ ì˜ˆì‹œ
- @Beanì„ ì‚¬ìš©í•˜ë©´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ MyService í´ë˜ìŠ¤ì˜ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  `@Autowired`ë¥¼ í†µí•´ì„œ ì´ ê°ì²´ë¥¼ ì£¼ì… ë°›ì•„ ì‚¬ìš©í•©ë‹ˆë‹¤.

```java
@Configuration
public class AppConfig {

  // MyService ê°ì²´ë¥¼ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ëŠ” ê³¼ì •
  @Bean
  public MyService myService() {
    return new MyService();
  }
}

public class MyService {
  public void doSomething() {
    System.out.println("ì–˜ê°€ ë­˜ ë˜ í•©ë‹ˆë‹¤.");
  }
}

@Controller
public class MyController {
  private final MyService myService;    // ì•„ê¹Œ ìœ„ì™€ì˜ ì°¨ì´ì ì€ ìš°ë¦¬ê°€ ì´ í´ë˜ìŠ¤ì—ì„œ ê°ì²´ë¥¼ ìƒì„±í•˜ì§€ ì•Šê³ ì„œ fieldë¡œ ì²˜ë¦¬í–ˆë‹¤ëŠ” ì ì´ ë˜ê² ìŠµë‹ˆë‹¤.

  // ìƒì„±ì ì£¼ì…
  public MyController(MyService myService) {
    this.myService = myService
  }

  public void handleRequet() {
    myService.doSomething();
  }
}
```
ì´ìƒì˜ ì˜ˆì‹œì—ì„œ @Configuration ì´ ë¶™ì–´ìˆëŠ” AppConfig í´ë˜ìŠ¤ëŠ” ìŠ¤í”„ë§ ë¹ˆ êµ¬ì„± í´ë˜ìŠ¤ë¡œ ë™ì‘í•˜ê²Œ ë©ë‹ˆë‹¤. myService() ë©”ì„œë“œì— @Bean ì• ë„ˆí…Œì´ì…˜ì„ ë¶™ì—¬ì„œ, ê²°ê³¼ê°’ì´ MyServiceì˜ ê°ì²´ê°€ ë˜ê³ , ì´ë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡í•˜ê²Œ ë©ë‹ˆë‹¤. ì´ìƒì˜ ì‘ì—…ì´ ì„ í–‰ë˜ê²Œ ë˜ë©´ MyController í´ë˜ìŠ¤ì—ì„œëŠ” new í‚¤ì›Œë“œ ì—†ì´, ìƒì„±ìë¥¼ í†µí•´ ë°”ë¡œ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¡œë¶€í„° MyService ê°ì²´ë¥¼ ì „ë‹¬ ë°›ì•„ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë©´ ê°ì²´ê°€ í†µì§¸ë¡œ í•˜ë‚˜ë§Œ ìˆë‹¤ëŠ” ê²ƒì„ ë‹´ë³´ í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— newë¥¼ ì“¸ ë•Œ ì²˜ëŸ¼ ê°ì²´ ê°œìˆ˜ê°€ ê³„ì† ëŠ˜ì–´ë‚˜ì§€ë„ ì•Šê³ , ë©”ëª¨ë¦¬ íš¨ìœ¨ì„±ê³¼ ì¼ê´€ì„±ì„ ê°€ì§ˆ ìˆ˜ ìˆìœ¼ë©´ì„œë„ MyController - MyService í´ë˜ìŠ¤ ê°„ì˜ ê²°í•©ë„ë„ ë‚®ì¶”ëŠ” íš¨ê³¼ë¥¼ ì§€ë‹™ë‹ˆë‹¤.

# ë°±ì—”ë“œ ë³´í˜¸ë¡œ ë„˜ì–´ê°€ê¸° ì „ì— push í•˜ê² ìŠµë‹ˆë‹¤.
git add .
git commit -m "feat: RESTful API + Swagger"
git push

# ë°±ì—”ë“œ ë³´í˜¸
1. Spring Security
2. JWTë¥¼ ì´ìš©í•œ ë°±ì—”ë“œ ë³´í˜¸
3. Role-based ë³´í˜¸

## Spring Security
- ìì²´ ê¸°ëŠ¥
  1. ì¸ë©”ëª¨ë¦¬ ì‚¬ìš©ì í•˜ë‚˜ë¥¼ í¬í•¨í•˜ëŠ” AuthenticationManager ë¹ˆ. ì‚¬ìš©ì ì´ë¦„ì€ userê³ , ì•”í˜¸ëŠ” Consoleì— ì‹¤í–‰í•  ë•Œë§ˆë‹¤ ì¶œë ¥ë©ë‹ˆë‹¤.
  2. `/css`, `/images` ê°™ì€ ì¼ë°˜ì ì¸ ì •ì  ë¦¬ì†ŒìŠ¤ ìœ„ì¹˜ì˜ ê²½ë¡œë¥¼ ë¬´ì‹œ. ë‹¤ë¥¸ ëª¨ë“  ì—”ë“œ í¬ì¸íŠ¸ì— ëŒ€í•œ HTTP ê¸°ë³¸ ì¸ì¦
  3. ìŠ¤í”„ë§ ApplicationEventPublisher ì¸í„°í˜ì´ìŠ¤ë¡œ ê²Œì‹œë˜ëŠ” ë³´í˜¸ ì´ë²¤íŠ¸
  4. HSTS, XSS, CSRFë¥¼ ë¹„ë¡¯í•œ ì¼ë°˜ì ì¸ ì €ìˆ˜ì¤€ ê¸°ëŠ¥ì„ ê¸°ë³¸ì ìœ¼ë¡œ í™œì„±í™”.
  5. ìë™ ìƒì„±ë˜ëŠ” ê¸°ë³¸ ë¡œê·¸ì¸ í˜ì´ì§€(í•œ ë²ˆë§Œ ì“°ê³  ì•ˆì“¸ê±°ê¸´ í•©ë‹ˆë‹¤ - ì €í¬ê°€ ì§€ê¸ˆ í”„ë¡ íŠ¸ê°€ ì—†ì–´ì„œ ì„ì‹œì ìœ¼ë¡œ ì“°ëŠ” ë¶€ë¶„).

### Spring Securityì˜ ë„ì…
1. build.gradleì— ê´€ë ¨ ì˜ì¡´ì„±ì„ ì¶”ê°€í• ê²ë‹ˆë‹¤.
  - mvnì—ì„œ spring boot starter securityë¥¼ ê²€ìƒ‰
```java
	implementation 'org.springframework.boot:spring-boot-starter-security'
	testImplementation 'org.springframework.boot:spring-boot-starter-security'
```
spring-boot-starter-security:ë²„ì „ëª…ì´ ìˆì—ˆëŠ”ë° ë²„ì „ ëª…ì‹œí–ˆì„ ê²½ìš°ì— ì˜¤ë¥˜ ë°œìƒí•©ë‹ˆë‹¤. 203/204ë²ˆ ë¼ì¸ ê¸°ì¤€ìœ¼ë¡œ ì˜ì¡´ì„±ì„ ì¶”ê°€í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.

http://localhost:8080ìœ¼ë¡œ ì ‘ì†í•˜ê²Œ ë˜ë©´ ì§€ê°€ ì•Œì•„ì„œ
http://localhost:8080/login ì´ë¼ê³  í•˜ëŠ” ì—”ë“œí¬ì¸íŠ¸ë¡œ ì´ë™í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì´ìƒì˜ ê³¼ì •ì— username : user / passwordëŠ” ì½˜ì†”ì— ì¶œë ¥ëœ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë¶™ì—¬ë„£ê¸° í•˜ì‹œë©´
http://localhost:8080/?continue ë¡œ ì´ë™í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆëŠ”ë° ì €í¬ëŠ” í˜„ì¬ 
http://localhost:8080ì— ì•„ë¬´ê²ƒë„ ì…ë ¥í•œê²Œ ì—†ê¸° ë•Œë¬¸ì— whitelabel pageê°€ ë‚˜ì˜µë‹ˆë‹¤.
http://localhost:8080/api/cars ì´ëŸ°ê±° ë“¤ì–´ê°”ì„ ë•Œ(API ëª…ì„¸ì„œì—ì„œ ë³¸ ê±° ë“¤ì–´ê°€ë³´ì…¨ì„ ë•Œ), ë°ì´í„°ê°€ ì´ì „ê³¼ ê°™ì´ ë‚˜ì˜¨ë‹¤ë©´ ì •ìƒ ì²˜ë¦¬ëœê²ë‹ˆë‹¤.

Spring Securityì˜ ì‘ë™ ë°©ì‹ì„ _êµ¬ì„±_ í•˜ë ¤ë©´ Config classë¥¼ ì¶”ê°€í•´ì•¼í•©ë‹ˆë‹¤. íŠ¹ì • ì—­í• ì´ë‚˜ ì‚¬ìš©ìê°€ ì ‘ê·¼ ê°€ëŠ¥í•œ URL ë˜ëŠ” URL íŒ¨í„´ì„ ì •ì˜í•  ìˆ˜ ìˆê³ , ì¸ì¦ ë©”ì»¤ë‹ˆì¦˜, ë¡œê·¸ì¸ í”„ë¡œì„¸ìŠ¤, ì„¸ì…˜ ê´€ë¦¬ ë“±ì„ ì •ì˜í•˜ëŠ” í´ë˜ìŠ¤ì— í•´ë‹¹í•©ë‹ˆë‹¤.

ê·¸ë˜ì„œ com.example.cardatabase íŒ¨í‚¤ì§€ì— SecurityConfig í´ë˜ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

```java
package com.example.cardatabase;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.core.userdetails.User;
import org.springframework.security.core.userdetails.UserDetails;
import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;
import org.springframework.security.crypto.password.PasswordEncoder;
import org.springframework.security.provisioning.InMemoryUserDetailsManager;

@Configuration
@EnableWebSecurity
public class SecurityConfig {
    @Bean
    public InMemoryUserDetailsManager userDetailsService() {
        UserDetails user = User.builder()
                .username("user")
                .password(passwordEncoder().encode("password"))
                .roles("USER")
                .build();
        return new InMemoryUserDetailsManager(user);
    }
    // ì´ê±°ëŠ” ì•”í˜¸í™”ë¥¼ ìœ„í•œ ê³¼ì •ì…ë‹ˆë‹¤.
    @Bean
    public PasswordEncoder passwordEncoder() {
        return new BCryptPasswordEncoder();
    }
}
```
ì´ìƒì˜ SecurityConfigì˜ @Configuration, @EnableWebSecurity ì• ë„ˆí…Œì´ì…˜ì€ ê¸°ë³¸ ì›¹ ë³´í˜¸ êµ¬ì„±ì„ í•´ì œí•˜ë©°, ì´ í´ë˜ìŠ¤ì—ì„œ ìì²´ Configë¥¼ ì •ì˜í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. -> ì¦‰ ì• ì´ˆì— Spring Securityì—ì„œ ì§€ì›í•˜ëŠ” ë³´í˜¸ Config ê´€ë ¨ ì„¤ì •ë“¤ì´ ìˆëŠ”ë° ìš°ë¦¬ê°€ ì»¤ìŠ¤í…€í•˜ê² ë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤.
ì¸ë©”ëª¨ë¦¬ ì‚¬ìš©ìë¥¼ ì¶”ê°€í–ˆëŠ”ë° ì‚¬ì‹¤ ì´ê±´ ì´ë²ˆ í…ŒìŠ¤íŠ¸ì—ë§Œ ì“¸ê±°ê¸° ë•Œë¬¸ì— í° ì˜ë¯¸ëŠ” ì—†ê³  ì˜¤íˆë ¤ @Beanì„ í†µí•´ì„œ ê°ì²´ë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡í–ˆê³ , ë˜í•œ PasswordEncoder í´ë˜ìŠ¤ì˜ ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ ì•ìœ¼ë¡œ ì•”í˜¸ ì…ë ¥ì„ í•˜ë”ë¼ë„ DBì—ëŠ” ì•”í˜¸í™”ê°€ ì´ë£¨ì–´ì§„ ìƒíƒœë¥¼ êµ¬í˜„í–ˆë‹¤ëŠ” ë¶€ë¶„ì„ ì£¼ëª©í•´ì•¼ í•©ë‹ˆë‹¤.
ì´ìƒì˜ ì½”ë“œ êµ¬í˜„ì—ì„œëŠ” ê²°ê³¼ì ìœ¼ë¡œ usernameì´ user / ë¹„ë°€ë²ˆí˜¸ê°€ password(ì•”í˜¸í™” ì™„ë£Œëœ) / ì—­í• ì€ USERë¡œ ì •ì˜ëœ ì¸ë©”ëª¨ë¦¬ ì‚¬ìš©ìë¥¼ ìƒì„±í–ˆë‹¤ëŠ” ì ì´ ë˜ê² ìŠµë‹ˆë‹¤.(builder patternìœ¼ë¡œ ë§Œë“¤ì—ˆë‹¤ëŠ” ê²ƒì—ë„ ì£¼ëª©í•´ì•¼ í•©ë‹ˆë‹¤.)

ì¸ë©”ëª¨ë¦¬ ì‚¬ìš©ìë¥¼ ë§Œë“œëŠ” ê²ƒì€ ê°œë°œ ë‹¨ê³„ì—ì„œëŠ” ê´œì°®ì§€ë§Œ ìš´ì˜ í™˜ê²½ì—ì„œëŠ” ì‚¬ìš©ì ì •ë³´ë¥¼ DBì— ì €ì¥í•©ë‹ˆë‹¤.
ê·¸ë¦¬ê³  ìœ ì € ì •ë³´ë¥¼ DBì— ì €ì¥í•˜ë ¤ë©´ ì—”í‹°í‹° í´ë˜ìŠ¤ì™€ ë¦¬í¬ì§€í† ë¦¬ í´ë˜ìŠ¤ê°€ ìˆì–´ì•¼ê² ì£ .
ê·¸ë¦¬ê³  ì•”í˜¸ë„ ì¼ë°˜ í…ìŠ¤íŠ¸ í˜•ì‹ìœ¼ë¡œ DBì— ì €ì¥ë˜ì–´ì„œëŠ” ì•ˆë  ê±°ê³ , ì•”í˜¸í™” ê³¼ì •ì´ í•„ìš”í• ê²ë‹ˆë‹¤.

1. com.example.cardatabase.domian íŒ¨í‚¤ì§€ì— AppUser í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê² ìŠµë‹ˆë‹¤.

```java
package com.example.cardatabase.domain;

import jakarta.persistence.*;
import lombok.Getter;
import lombok.NoArgsConstructor;
import lombok.RequiredArgsConstructor;
import lombok.Setter;

@Entity
@NoArgsConstructor(force = true)
@RequiredArgsConstructor
@Getter
@Setter
public class AppUser {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(nullable=false, updatable = false)
    private Long id;
    
    @Column(nullable = false, unique = true)
    private final String username;
    
    @Column(nullable = false)
    private final String password;
    
    @Column(nullable = false)
    private final String role;
}
```

ì´ìƒì˜ ì½”ë“œì—ì„œ ì²˜ìŒìœ¼ë¡œ @Column ì‚¬ìš©ì„ í†µí•œ êµ¬ì²´ì ì¸ ì»¬ëŸ¼ ì„¤ì •ì„ í•´ë´¤ìŠµë‹ˆë‹¤. name = ì†ì„±ìœ¼ë¡œ ì»¬ëŸ¼ëª…ì„ ìƒˆë¡œ ì»¤ìŠ¤í…€í•˜ëŠ” ê²ƒë¶€í„° nullableë¡œ null í—ˆìš© ì—¬ë¶€ / uniqueë¥¼ í†µí•´ì„œ ë‹¤ë¥¸ rowë“¤ê³¼ì˜ ì°¨ì´ë¥¼ ì‹ë³„í•  ê²ƒì¸ì§€ë¥¼ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
usernameì˜ ê²½ìš° ì¼ì¹˜í•˜ê²Œ ë˜ë©´ userë“¤ì´ ì„œë¡œê°€ ë‹¤ë¥¸ ì‚¬ëŒì¸ì§€ ì¸ì§€í•  ìˆ˜ ì—†ìœ¼ë‹ˆ usernameì€ unique ì„¤ì •ì„, ë¹„ë°€ë²ˆí˜¸ì˜ ê²½ìš°ì—ëŠ” ì• ì´ˆì— ì¸ì½”ë”© ë˜ê¸°ë„ í•˜ê³  ë‚¨ì´ ì•Œ ì¼ì´ ì—†ìœ¼ë‹ˆ unique=false ë¡œ ì„¤ì •í–ˆìŠµë‹ˆë‹¤. íŠ¹ì • ì»¬ëŸ¼ì´ ì–´ë–¤ ì†ì„±ì„ ì§€ë…€ì•¼ í•˜ëŠ”ì§€ëŠ” ì„¤ê³„ ë‹¨ê³„ì—ì„œ ê³ ë¯¼í•´ë´ì•¼ í•©ë‹ˆë‹¤.

2. AppUserRepositoryë¥¼ ìƒì„±. -> ì„¤ì •í•˜ì„¸ìš”.
```java
package com.example.cardatabase.domain;

import org.springframework.data.jpa.repository.JpaRepository;

import java.util.Optional;

public interface AppUserRepository extends JpaRepository<AppUser, Long> {
    Optional<AppUser> findByUsername(String username);
}
```
ì´ìƒì˜ ì½”ë“œì—ì„œ ì£¼ëª©í•´ì•¼ í•  ì ì€ ì—¬íƒœê¹Œì§€ CarRepositoryì— ì¶”ìƒ ë©”ì„œë“œë“¤ì„ ì •ì˜í•  ë•ŒëŠ” ê²°ê³¼ê°’ë“¤ì´ ê¸°ë³¸ì ìœ¼ë¡œ ë³µìˆ˜ë¡œ ë‚˜ì˜¤ê¸° ë•Œë¬¸ì— List ìë£Œí˜•ì„ ì¼ì—ˆì§€ë§Œ findByUsername()ì˜ ê²½ìš°ì—ëŠ” username í•„ë“œê°€ unique=trueì´ê¸° ë•Œë¬¸ì— ê¸°ë³¸ì ìœ¼ë¡œ ê²°ê³¼ê°’ì´ í•˜ë‚˜ì´ê±°ë‚˜ ì•„ë‹ˆë©´ 0ê°œê°€ ë‚˜ì˜¤ê²Œ ë ê²ë‹ˆë‹¤. ê·¸ë˜ì„œ return typeì„ Listë¡œ ì„¤ì •í•˜ëŠ” ê²ƒì€ ì ì ˆí•˜ì§€ ì•Šì€ ì„ íƒì§€ê°€ ë ê²ë‹ˆë‹¤.
ê·¸ë ‡ë‹¤ë©´ AppUserë¥¼ returní•˜ëŠ” ê²ƒì´ ì ì ˆí•˜ì§€ë§Œ ì˜ˆë¥¼ ë“¤ì–´ ì˜›ë‚ ì—ëŠ”
```java
public AppUser findByusername(String username) {
  if (usernameì´ DBë‚´ì—ì„œ ì¼ì¹˜í•˜ëŠ” usernameì´ ìˆë‹¤ë©´) {
    return ì¼ì¹˜í•˜ëŠ” ê°ì²´ ì „ì²´ ë¦¬í„´
  }
  return null; 
}
```
ì™€ ê°™ì€ ë¡œì§ì´ ê¸°ë³¸ì ìœ¼ë¡œ í•„ìš”í• ê²ë‹ˆë‹¤. ê·¼ë° ì—¬ê¸°ëŠ” interfaceì´ê¸° ë•Œë¬¸ì— ì¼ë°˜ ë©”ì„œë“œë¥¼ ì‘ì„±í•˜ì§€ ëª»í•©ë‹ˆë‹¤. ê·¸ ë§ì€ ê²°ê³¼ì ìœ¼ë¡œ AppUserë¥¼ return typeìœ¼ë¡œ ì§€ì •í•˜ê²Œ ë˜ë©´ AppUserRepositoryë¥¼ import í•´ì˜¤ëŠ” ê³³ ë§ˆë‹¤ ìœ„ì˜ ë¡œì§ì„ ê³„ì† ë³µì‚¬ë¶™ì—¬ë„£ê¸° í•´ì•¼í•œë‹¤ëŠ” ëœ»ì´ ë˜ê² ë„¤ìš”.

ê·¸ë˜ì„œ Optionalì´ë¼ê³  í•˜ëŠ” í´ë˜ìŠ¤ê°€ ìƒˆë¡œ ë‚˜ì˜¤ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ì–˜ëŠ” nullê°’ìœ¼ë¡œ return ë˜ë”ë¼ë„ ì¼ë‹¨ ì˜¤ë¥˜ê°€ ì•ˆë‚©ë‹ˆë‹¤.

3. domainê³¼ ê°™ì€ ìœ„ì¹˜ service íŒ¨í‚¤ì§€ë¥¼ ìƒì„±
4. service íŒ¨í‚¤ì§€ ë‚´ì— UserDetailsServiceImplì´ë¼ëŠ” í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê² ìŠµë‹ˆë‹¤.
  - ë˜ê²Œ ê±°ì§€ê°™ê³  ê¸¸ê³  í•œ ì´ë¦„ì¸ë° Implì€ implementë¥¼ ëœ»í•©ë‹ˆë‹¤.
  - implementsì˜ ì˜ë¯¸ëŠ” íŠ¹ì • ì¸í„°í˜ì´ìŠ¤ì˜ ì¶”ìƒ ë©”ì„œë“œë“¤ì„ ê°•ì œ êµ¬í˜„í•˜ê¸° ìœ„í•¸ ëª…ë ¹ì–´ì˜€ìŠµë‹ˆë‹¤.
  - ê·¸ë˜ì„œ íŠ¹ì • í´ë˜ìŠ¤ëª…ì´ Implë¡œ ëë‚˜ê²Œ ëœë‹¤ë©´ ì´ëŠ” ì–´ë– í•œ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ë¼ê³  í•´ì„í•˜ì‹œë©´ ë©ë‹ˆë‹¤.
  - ì¸í„°í˜ì´ìŠ¤ëª…Impl.java ì˜ í˜•íƒœë¡œ ì‘ì„±ë©ë‹ˆë‹¤.

```java
package com.example.cardatabase.service;

import com.example.cardatabase.domain.AppUser;
import com.example.cardatabase.domain.AppUserRepository;
import org.springframework.security.core.userdetails.User;
import org.springframework.security.core.userdetails.User.UserBuilder;
import org.springframework.security.core.userdetails.UserDetails;
import org.springframework.security.core.userdetails.UserDetailsService;
import org.springframework.security.core.userdetails.UsernameNotFoundException;
import org.springframework.stereotype.Service;

import java.util.Optional;

@Service
public class UserDetailsServiceImpl implements UserDetailsService {
    private final AppUserRepository userRepository;

    public UserDetailsServiceImpl(AppUserRepository userRepository) {
        this.userRepository = userRepository;
    }

    @Override
    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {
        Optional<AppUser> user = userRepository.findByUsername(username);

        UserBuilder builder = null;
        if (user.isPresent()) { // ì´í•˜ì˜ ì‹¤í–‰ë¬¸ì´ ì‹¤í–‰ëœë‹¤ë©´ userì— AppUser ê°ì²´ê°€ ìˆë‹¤ëŠ” ì˜ë¯¸
            AppUser currentUser = user.get();
            builder = User.withUsername(username);
            builder.password(currentUser.getPassword());
            builder.roles(currentUser.getRole());
        } else {
            throw new UsernameNotFoundException("User not found.");
        }
        
        return builder.build();
    }
}
```

ì´ìƒì˜ ì½”ë“œì—ì„œ ìƒê¸°ëŠ” ì˜ë¬¸ì ì€ ë©€ì©¡í•˜ê²Œ ìˆëŠ” AppUser í´ë˜ìŠ¤ì˜ ê°ì²´ì¸ userë¥¼ ê·¸ëŒ€ë¡œ ì“°ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ë¬´ìŠ¨ UserBuilderì¸ê°€ í•˜ëŠ” ë‹¤ë¥¸ í´ë˜ìŠ¤ì˜ ê°ì²´ì¸ builderë¥¼ ì„ ì–¸í•´ë†“ê³ , ê±°ê¸° ë‚´ë¶€ì— AppUserì˜ field ê°’ë“¤ì„ í•˜ë‚˜ì”© ëŒ€ì…í•˜ëŠ” ë¡œì§ì´ ìˆë‹¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì´ëŠ” ì¸í„°í˜ì´ìŠ¤ì˜ ì •ì˜ë¥¼ ëª…í™•í•˜ê²Œ ì•Œì§€ ëª»í•˜ë©´ ë˜ê²Œ íš¨ìœ¨ì ì´ì§€ ëª»í•œ ì½”ë“œë¡œ í•´ì„ë  ì—¬ì§€ê°€ ìˆìŠµë‹ˆë‹¤.
ì¸í„°í˜ì´ìŠ¤ ë‚´ì—ëŠ” ì¶”ìƒ ë©”ì„œë“œë§Œ ì¡´ì¬í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì´ë¥¼ êµ¬í˜„í•˜ëŠ” í´ë˜ìŠ¤ëŠ” ì¸í„°í˜ì´ìŠ¤ ë‚´ì— ìˆëŠ” ì¶”ìƒ ë©”ì„œë“œë“¤ì„ ê°•ì œë¡œ _êµ¬í˜„(implement)_ í•´ì•¼ë§Œ í•©ë‹ˆë‹¤. ì´ë¯¸ ìš°ë¦¬ê°€ AppUserë¼ëŠ” entity í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê¸° ì´ì „ì— ìˆëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í–ˆìœ¼ë¯€ë¡œ ë‹¹ì—°íˆ ê±°ê¸°ì— ìˆëŠ” ì¶”ìƒ ë©”ì„œë“œë“¤ì˜ return typeì€ AppUserê°€ ì•„ë‹ê²ë‹ˆë‹¤.
ë˜í•œ ë‹¤ë¥¸ ê°œë°œìë“¤ë„ ì´ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í• ê±°ë‹ˆê¹Œ íŠ¹ì • í”„ë¡œì íŠ¸ì— ë§ëŠ” entity í´ë˜ìŠ¤ë¼ê¸° ë³´ë‹¤ëŠ” ë³´í¸ì ì¸ í˜•íƒœì˜ return typeì„ ìš”êµ¬í•˜ê²Œ ë ê±°ë¼ê³  ìƒê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ê·¸ë ‡ê²Œ ì¶”ìƒ ë©”ì„œë“œì˜ return typeì´ ê³ ì •ë˜ì–´ ìˆìœ¼ë¯€ë¡œ ìš°ë¦¬ëŠ” ìš°ë¦¬ê°€ ë§Œë“  entity classì˜ ê°ì²´ë¥¼ UserDetails í´ë˜ìŠ¤ì˜ ê°ì²´ í˜•íƒœë¡œ ëŒ€ì…í•´ì¤„ í•„ìš”ê°€ ìˆê¸° ë•Œë¬¸ì— ifë¬¸ ë‚´ë¶€ì˜ ì‹¤í–‰ë¬¸ì—ì„œ í•´ë‹¹ ë¡œì§ì´ ì¡´ì¬í•˜ê²Œ ë©ë‹ˆë‹¤.

- ì´ìƒì˜ ì½”ë“œëŠ” Spring Security ì¸ì¦ ì²˜ë¦¬ ì‹œ DBì—ì„œ ì‚¬ìš©ìë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ì„œ UserServiceDetailsImpl í´ë˜ìŠ¤ì— AppRepository í´ë˜ìŠ¤ë¥¼ ì£¼ì…í–ˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  AppUserRepositoryì—ëŠ” findByUsername() ë©”ì„œë“œë¥¼ Optional ê²°ê³¼ê°’ì´ ë‚˜ì˜¤ë„ë¡ ì‘ì„±í•´ë’€ìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ Optionalì— ë”¸ë¦° ë©”ì„œë“œì¸ isPresent() ë©”ì„œë“œë¥¼ í†µí•´ íŠ¹ì • usernameì„ ì§€ë‹Œ AppUserê°€ ìˆëŠ”ì§€ë¥¼ ì²´í¬í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤. ê·¸ë˜ì„œ userê°€ ì—†ë‹¤ë©´ UsernameNotFoundException ì˜ˆì™¸ë¥¼ ë°œìƒì‹œì¼œì„œ ë˜ì§‘ë‹ˆë‹¤(throw).
- ê·¸ë¦¬ê³  ê°•ì œ êµ¬í˜„í•˜ë„ë¡ ëœ loadUserByUsername() ë©”ì„œë“œëŠ” ì¸ì¦(authentication)ì— í•„ìš”í•œ UserDetails ê°ì²´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤(return type í™•ì¸í•  ê²ƒ). 

gitignore ê´€ë ¨
git add .
git commit -m "test"
git push
- ì‹¤íŒ¨í•¨...

ì´ì œ SecurityConfigì—ì„œ Spring Securityê°€ ì¸ë©”ëª¨ë¦¬ ì‚¬ìš©ì ëŒ€ì‹  ë°ì´í„°ë² ì´ìŠ¤ì˜ ì‚¬ìš©ìë¥¼ ì´ìš©í•˜ë„ë¡ ì§€ì •í• ê²ë‹ˆë‹¤.
ê·¸ë˜ì„œ userDetailsService() ë©”ì„œë“œë¥¼ ì§¸ë¡œ ì‚­ì œí• ê±°ë‹ˆê¹Œ, í˜„ì¬ ë²„ì „ì˜ SecurityConfig íŒŒì¼ì„ ì¢€ ì˜®ê²¨ë†“ë„ë¡í•˜ê² ìŠµë‹ˆë‹¤.
```java
package com.example.cardatabase;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.core.userdetails.User;
import org.springframework.security.core.userdetails.UserDetails;
import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;
import org.springframework.security.crypto.password.PasswordEncoder;
import org.springframework.security.provisioning.InMemoryUserDetailsManager;

@Configuration
@EnableWebSecurity
public class SecurityConfig {
    @Bean
    public InMemoryUserDetailsManager userDetailsService() {
        UserDetails user = User.builder()
                .username("user")
                .password(passwordEncoder().encode("password"))
                .roles("USER")
                .build();
        return new InMemoryUserDetailsManager(user);
    }
    // ì´ê±°ëŠ” ì•”í˜¸í™”ë¥¼ ìœ„í•œ ê³¼ì •ì…ë‹ˆë‹¤.
    @Bean
    public PasswordEncoder passwordEncoder() {
        return new BCryptPasswordEncoder();
    }
    // 20250924 14:40ì— ì—…ë¡œë“œí•©ë‹ˆë‹¤.
    // í•œ ë²ˆ ë”
}
```
method ë‚ ë¦¬ê³  ë‚˜ë‹ˆê¹Œ ì¸ë©”ëª¨ë¦¬ ì‚¬ìš©ì ê´€ë ¨ ì •ë³´ê°€ ì „ë¶€ ë‹¤ ë‚ ì•„ê°”ìŠµë‹ˆë‹¤.
ê·¸ëŸ¬ë©´
loginì´ ë¶ˆê°€ëŠ¥í•˜ë„¤ìš”.

ê·¼ë° ì´ëŸ° ê²½ìš°ì— ì• ì´ˆì— SecurityConfig.javaê°€ ì—†ì—ˆì„ ë•ŒëŠ” ì½˜ì†”ì— ë¹„ë°€ë²ˆí˜¸ê°€ ì°í˜”ì—ˆìŠµë‹ˆë‹¤.
ê·¼ë° ì´ë²ˆì—ëŠ” ì•ˆë‚˜ì™€ìˆìŠµë‹ˆë‹¤.

ì¦‰, SecurityConfig ìì²´ê°€ í•œêµ­ì–´ë¡œ ë³´ì•ˆêµ¬ì„± ê´€ë ¨ í´ë˜ìŠ¤ì¸ ë§Œí¼ ì–˜ë¥¼ ìƒì„±í•˜ëŠ” ìˆœê°„ì— Spring Securityì˜ default ì¸ì¦ ê´€ë ¨ ì„¤ì •ì´ ì‹¸ê·¸ë¦¬ ì‚¬ë¼ì§„ë‹¤ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```java
package com.example.cardatabase;

import com.example.cardatabase.service.UserDetailsServiceImpl;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;
import org.springframework.security.crypto.password.PasswordEncoder;

@Configuration
@EnableWebSecurity
public class SecurityConfig {
    private final UserDetailsServiceImpl userDetailsService;

    public SecurityConfig(UserDetailsServiceImpl userDetailsService) {
        this.userDetailsService = userDetailsService;
    }
    
    public void configGlobal (AuthenticationManagerBuilder auth) throws Exception {
        auth.userDetailsService(userDetailsService).passwordEncoder(new BCryptPasswordEncoder());
    }

    @Bean
    public PasswordEncoder passwordEncoder() {
        return new BCryptPasswordEncoder();
    }
}
```

ë³€ê²½ ì´í›„ì…ë‹ˆë‹¤. userDetailsService ê´€ë ¨í•˜ì—¬ ì–˜ê°€ methodì¸ì§€ fieldëª…ì¸ì§€ ê°ì²´ëª…ì¸ì§€ êµ¬ë¶„ì„ í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤. ìƒ‰ê¹” í™•ì¸ ì˜í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.

CarDatabaseApplication.javaì— AppUser ê´€ë ¨ ë”ë¯¸ ë°ì´í„°ë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤. ì•Œì•„ì„œ í™•ì¸í•˜ì„¸ìš”.
ê·¸ëŸ°ë° ì£¼ì˜í•˜ì‹¤ ì ì€ owner1 / 2 ë§Œë“¤ ë•ŒëŠ” ê°ì²´ëª… ë”°ë¡œ ì§€ì •í•œ ë‹¤ìŒì— ë§Œë“¤ì–´ë†“ê³ 
owerRepository.save(owner1);
owerRepository.save(owner2);
í˜•íƒœë¡œ ì €ì¥í–ˆëŠ”ë°, 
ì´ë²ˆì— AppUser ë§Œë“¤ ë•ŒëŠ”
userRepository.save(new AppUser(username, password, role)); í˜•íƒœë¡œ ì €ì¥í–ˆì—ˆìŠµë‹ˆë‹¤.
ì½”ë“œ ë¼ì¸ ìƒì˜ ì°¨ì´ Java ìˆ˜ì—… ë•Œë„ ë§ì´ ë´ì™”ì§€ë§Œ í•œ ë²ˆ í™•ì¸í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.

- ì°¸ì¡° : bcryptëŠ” í•´ì‹± í•¨ìˆ˜ë¡œ, ì•”í˜¸í™”ë¥¼ í•  ë•Œ ìì£¼ ì‚¬ìš©ë˜ëŠ” ê°œë…ì…ë‹ˆë‹¤. í•´ì‹±ëœ ê²°ê³¼ëŠ” í•­ìƒ ë‹¤ë¥´ê²Œ ë‚˜ì˜¤ê¸° ë•Œë¬¸ì— ì—¬ëŸ¬ë¶„ì´ ì§ì ‘ í•´ì‹± ì‚¬ì´íŠ¸ ë“¤ì–´ê°€ì„œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë„£ê³  ê²°ê³¼ê°’ì„ AppUser() ë‚´ë¶€ì˜ argumentë¡œ ë„£ì–´ì•¼ í•©ë‹ˆë‹¤.

ì´ìƒê¹Œì§€ì˜ ê³¼ì •ì„ ê±°ì¹˜ê³  Springboot Projectë¥¼ ì¬ì‹¤í–‰í•˜ê²Œ ëì„ ë•Œ, HeidiSQLì„ ì¼œì„œ ë“¤ì–´ê°€ë©´ app_user í…Œì´ë¸”ì—ì„œ ë”ë¯¸ ë°ì´í„°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë˜í•œ http://localhost:8080ìœ¼ë¡œ ì ‘ì†í•˜ê²Œ ë˜ë©´ ìë™ìœ¼ë¡œ /loginìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŒ…ë˜ë©´ì„œ id / passwordë¥¼ ìš”êµ¬í•˜ëŠ”ë°, ìš°ë¦¬ê°€ ë§Œë“  username / passwordë¥¼ ì´ìš©í•´ì„œ ë¡œê·¸ì¸ì´ ê°€ëŠ¥í•´ì¡ŒìŠµë‹ˆë‹¤.

ê·¸ëŸ°ë° postmanì—ì„œ GET http://localhost:8080/api/carsë¥¼ ì‹œë„í–ˆì„ ë•Œ, ì—¬íƒœê¹Œì§€ì™€ ë‹¤ë¥´ê²Œ 401 Unauthorized ë¼ëŠ” í‘œí˜„ì´ ë‚˜ì™”ìŠµë‹ˆë‹¤.
![401 Unauthorized](image-1.png)

ì´ì œ DBì— ì ‘ì†ì„ í•  ë•Œ ë°ì´í„°ë² ì´ìŠ¤ì˜ ì‚¬ìš©ìë¥¼ ì¸ì¦ì— ì´ìš©í•œë‹¤ëŠ” ì ì…ë‹ˆë‹¤.

GET ìš”ì²­í•  ë•ŒëŠ” ì €í¬ê°€ ë­ êµ³ì´ í•˜ëŠ” ê±° ì—†ì´ URLì— send ë²„íŠ¼ë§Œ ë³´ë‚´ë©´ ê·¸ë§Œì´ì—ˆëŠ”ë°, ì¸ì¦ ì ˆì°¨ë¥¼ ì‘ì„±í•œ ì´í›„ì—ëŠ” ìš”êµ¬ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤.
POST ìš”ì²­í•  ë•Œ ë´¤ë˜ headers ìˆëŠ” íƒ­ ë¶€ë¶„ì— Authorizationì´ë¼ëŠ” ë¶€ë¶„ì´ ìˆìŠµë‹ˆë‹¤.
Authorization -> Basic Auth -> ìš°ë¦¬ username / password ì‚¬ìš© í•œ í›„ì— GET ìš”ì²­ì„ ë‚ ë ¤ë³´ì‹œë©´ ê²°ê³¼ê°’ì´ 200 OKê°€ ë‚˜ì™”ì„ ë•Œ ì •ìƒì…ë‹ˆë‹¤.

ê·¸ë¦¬ê³  postmanì—ì„œ http://localhost:8080/api/appUsers ì—”ë“œí¬ì¸íŠ¸ë¡œ GET ìš”ì²­ì„ ë‚ ë ¤ë³´ë©´ íšŒì›ë“¤ì˜ id / username / hashingëœ passwordê°€ ì „ë¶€ ë“œëŸ¬ë‚˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ Spring Data RESTê°€ ëª¨ë“  ë¦¬í¬ì§€í† ë¦¬ì— ëŒ€í•´ì„œ RESTful ì›¹ ì„œë¹„ìŠ¤ë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•˜ê¸° ë•Œë¬¸ì— ì¼ì–´ë‚˜ëŠ” ì¼ì…ë‹ˆë‹¤. ì´ë¥¼ ë§‰ê¸° ìœ„í•œ ë°©ë²•ìœ¼ë¡œ
`@RepositryRestResource(exported = false)`

```java
package com.example.cardatabase.domain;

import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.rest.core.annotation.RepositoryRestResource;

import java.util.Optional;

@RepositoryRestResource(exported = false)
public interface AppUserRepository extends JpaRepository<AppUser, Long> {
    Optional<AppUser> findByUsername(String username);
}
```
ì´ì œ `@RepositryRestResource` ì–˜ ê´€ë ¨í•œ ê±° ctrl + f í•´ì„œ ì „ì²´ ì •ë¦¬ í•œ ë²ˆ í•´ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤.

## JWTë¡œ ë°±ì—”ë“œ ë³´í˜¸
- ì´ì „ê¹Œì§€ ìˆ˜ì—…í•œ ë‚´ìš©ì€ ì•„ê¹Œ postmanì—ì„œ ë´¤ë˜ ê²ƒì²˜ëŸ¼ basic authì— í•´ë‹¹í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ê¸°ë³¸ ì¸ì¦ì€ í† í°ì„ ì²˜ë¦¬í•˜ê±°ë‚˜ ì„¸ì…˜ì„ ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì„ ì œê³µí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê·¸ëƒ¥ usernameê³¼ passwordê°€ ì¼ì¹˜í•˜ëŠ”ì§€ë§Œ í™•ì¸í•  ë¿ì…ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì‚¬ìš©ìê°€ ë¡œê·¸ì¸í•  ë•Œ ê° ìš”ì²­ê³¼ í•¨ê»˜ ìê²© ì¦ëª…ì´ ì „ì†¡ë˜ê¸° ë•Œë¬¸ì— ì ì¬ì ì¸ ë³´ì•ˆ ìœ„í˜‘ì´ ìˆëŠ” ë°©ì‹ì´ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 

- ì´ìƒì˜ ë°©ë²•ìœ¼ë¡œëŠ” React í™œìš© í”„ë¡ íŠ¸ì—”ë“œë¥¼ ê°œë°œí•  ë•Œ ì‚¬ìš©í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— JWTë¥¼ í™œìš©í•œ ì¸ì¦ì„ ë„ì…í• ê²ë‹ˆë‹¤.

### JWT
- ì¸ì¦ êµ¬í˜„ ë°©ë²• ì¤‘ í•˜ë‚˜ë¡œ, ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ ëª©ì ìœ¼ë¡œ RESTful APIì—ì„œ ê°€ì¥ ë³´í¸ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.
- ì¸ì¦(Authentication) : ë³´í†µ ë¡œê·¸ì¸ ê³¼ì •ê³¼ ê´€ë ¨
- ì¸ê°€/ê¶Œí•œ ë¶€ì—¬(Authorization) : íŠ¹ì • ì—­í• ì´ íŠ¹ì • í˜ì´ì§€ë¥¼ ë“¤ì–´ê°ˆ ìˆ˜ ìˆëŠ”ì§€ ì—†ëŠ”ì§€ ì—¬ë¶€.
  - ì¦‰ ì¸ì¦ì€ ë°›ì•˜ê¸° ë•Œë¬¸ì— ë¡œê·¸ì¸ì´ ê°€ëŠ¥í•˜ê¸´ í•˜ì§€ë§Œ íšŒì›ì´ ë‹¤ë¥¸ íšŒì›ì„ ì‚­ì œí•  ê¶Œí•œì€ ì—†ëŠ” ë°˜ë©´ì— ê´€ë¦¬ìëŠ” ë‹¤ë¥¸ íšŒì›ì„ ì‚­ì œí•  ê¶Œí•œì„ ë¶€ì—¬ ë°›ëŠ” ë“±. ì¸ì¦ ì´í›„ì˜ ì ˆì°¨ì— ê°€ê¹ìŠµë‹ˆë‹¤.

- JWTëŠ” í¬ê¸°ê°€ ë§¤ìš° ì‘ê¸° ë–„ë¬¸ì— URL / POST ë§¤ê°œë³€ìˆ˜ ë˜ëŠ” í—¤ë” ë‚´ë¶€ì— ë‹´ì•„ì„œ ì „ì†¡í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. íŠ¹íˆ postman ìƒì—ì„œì˜ ìš”ì²­ì„ í•  ë•Œ ì˜ˆì‹œë¥¼ ë³´ì—¬ë“œë¦´ ì˜ˆì •ì…ë‹ˆë‹¤.

- JWT ë‚´ë¶€ì—ëŠ” ì‚¬ìš©ì ì´ë¦„ê³¼ ì—­í•  ë“± ì‚¬ìš©ìì— ëŒ€í•œ ëª¨ë“  í•„ìˆ˜ ì •ë³´ë¥¼ ë‹´ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### JWTì˜ êµ¬ì¡°
- ê¸°ë³¸ êµ¬ì¡° : xxxxxxx.yyyyyyyy.zzzzzzz
  - xxxxx ë¶€ë¶„ : í† í°ì˜ ìœ í˜•ê³¼ í•´ì‹± ì•Œê³ ë¦¬ì¦˜ì„ ì •ì˜í•˜ëŠ” í—¤ë”(Header)
  - yyyyy ë¶€ë¶„ : í˜ì´ë¡œë“œë¡œ ì¸ì¦ì—ì„œ ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ì ì •ë³´ë¥¼ í¬í•¨í•¨.
  - zzzzz ë¶€ë¶„ : ì„œëª…ìœ¼ë¡œ, í† í°ì´ ë„ì¤‘ì— ë³€ê²½ë˜ì§€ ì•Šì•˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” ë° ì´ìš©.
![jwt êµ¬ì¡°](JWT-êµ¬ì¡°.png)

![jwt ì¸ì½”ë”©ëœ ë²„ì „](jwt-í™•ì¸-ì‚¬ì´íŠ¸.png)

### JWT ìƒì„± ë° í•´ì„ê³¼ ì‘ìš© ê³¼ì •
1. Java / Android ìš© JWT ë¼ì´ë¸ŒëŸ¬ë¦¬ì¸ jjwt ë¼ì´ë¸ŒëŸ¬ë¦¬ ì˜ì¡´ì„±ì„ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤.
  - jwt -> JSON Web Token -> JavaScript Object Notation Web Token 
  - jjwt -> Java JavaScript Object Notation Web Token

2. ë¡œê·¸ì¸ ë³´í˜¸
  1. JWTë¥¼ ìƒì„±í•˜ê³  ê²€ì¦í•˜ëŠ” í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê²ë‹ˆë‹¤. service íŒ¨í‚¤ì§€ì—ì„œ JwtService í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê²ë‹ˆë‹¤.

```java
package com.example.cardatabase.service;

import org.springframework.stereotype.Component;

@Component
public class JwtService {
    // 1ì¼(ë°€ë¦¬ì´ˆ). ì‹¤ì œ ìš´ì˜ì‹œì—ëŠ” ë” ì§§ì€ê²Œ ë‚«ìŠµë‹ˆë‹¤.
    static final long EXPIRATIONTIME = 86400000;
    static final String PREFIX = "Bearer";
}
```
ë§Œë£Œì‹œê°„ í•„ë“œì˜ ê²½ìš°ì—ëŠ” ê·¸ëƒ¥ 1ì¼ì„ ë°€ë¦¬ì´ˆ ë‹¨ìœ„ë¡œí•´ì„œ ê³±í•œ ê°œë…ì…ë‹ˆë‹¤.
PREFIXëŠ” í† í°ì˜ ì ‘ë‘ì‚¬ë¥¼ ì˜ë¯¸í•˜ëŠ”ë°, ì¼ë°˜ì ìœ¼ë¡œ "Bearer" ìŠ¤í‚¤ë§ˆê°€ ì´ìš©ë˜ëŠ” í¸ì…ë‹ˆë‹¤.
JWTëŠ” Authorization í—¤ë”ë¡œ ì „ì†¡ë˜ë©´ì„œ Bearer ìŠ¤í‚¤ë§ˆë¥¼ ì´ìš©í•˜ëŠ” ê²½ìš°ì˜ ì˜ˆì‹œëŠ” ì´í•˜ì™€ ê°™ìŠµë‹ˆë‹¤.
`Authorization: Bearer <token>`
Bearer ë’¤ì— ê³µë°±ì´ ìˆìŠµë‹ˆë‹¤. ë‚˜ì¤‘ì— ì ‘ë‘ì‚¬ë¥¼ ì œê±°í•˜ê³  tokenì˜ ê°’ë§Œ ê°€ì§€ê³  ìœ íš¨ì„±ì„ ê²€ì¦í•´ì•¼í•˜ê¸° ë•Œë¬¸ì— Bearer ì ‘ë‘ì‚¬ë¥¼ ì œê±°í•˜ëŠ” ê³¼ì •ì—ì„œ ê³µë°±ì„ ì œê±°í•˜ì§€ ì•ŠëŠ” ë°”ëŒì— ê²°ê³¼ê°’ì´
`<token>`ì´ ì•„ë‹ˆë¼ ` <token>`ì´ ë˜ì–´ì„œ ìœ íš¨ì„± ê²€ì¦ì— í†µê³¼í•˜ì§€ ëª»í•˜ëŠ” ë¶„ë“¤ì´ ë§ìŠµë‹ˆë‹¤.
_ì§„ì§œì§„ì§œì£¼ì˜ì£¼ì˜_

  2. jjwt ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ secretKeyFor() ë©”ì„œë“œë¥¼ ì´ìš©í•˜ì—¬ ë¹„ë°€ í‚¤ë¥¼ ìƒì„±í• ê²ë‹ˆë‹¤. ì‹œì—°ìš©ìœ¼ë¡œë§Œ ì‚¬ìš©ë ê±°ê³  ì‹¤ì œ DBì—ëŠ” ì˜ ëª¨ë¥´ê² ìŠµë‹ˆë‹¤. ìš´ì˜ í™˜ê²½ ìƒì—ì„œëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì„±ì—ì„œ ë¹„ë°€ í‚¤ë¥¼ ì½ì–´ì™€ì•¼ í•˜ëŠ” ë“± ì°¨ì´ê°€ ì•½ê°„ ìƒê¸°ê²Œ ë©ë‹ˆë‹¤. 
    - ì´í›„ getToken() ë©”ì„œë“œë¥¼ í™œìš©í•˜ì—¬ í† í°ì„ ìƒì„±í•˜ê³  return
    - getAuthUser() ë©”ì„œë“œë¥¼ í†µí•´ Authorization í—¤ë”ì—ì„œ í† í°ì„ ê°€ì ¸ì˜¤ê²Œ ë©ë‹ˆë‹¤.
    - jjwt ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì œê³µí•˜ëŠ” parseBuilder() ë©”ì„œë“œë¥¼ í™œìš©, jwtParseBuilder ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í• ê²ë‹ˆë‹¤.
    - setSigningKey() ë©”ì„œë“œë¡œ í† í° í™•ì¸ì„ ìœ„í•œ ë¹„ë°€ í‚¤ ì§€ì •ì„ í•©ë‹ˆë‹¤(setterì…ë‹ˆë‹¤)
    - parseClaimsJws() ë©”ì„œë“œë¡œ Authorization í—¤ë”ì—ì„œ Bearer ì ‘ë‘ì‚¬ë¥¼ ì œê±°í•©ë‹ˆë‹¤(ë§¤ìš°ë§¤ìš°ì¤‘ìš”ì¤‘ìš”)
    - getSubject() ë©”ì„œë“œë¡œ usernameì„ ê°€ì ¸ì˜¬ê²ë‹ˆë‹¤. ì•„ë˜ì—ëŠ” ì´ìƒì˜ ê³¼ì •ì„ ì½”ë“œë¡œ ì‘ì„±í•œ ì˜ˆì‹œì…ë‹ˆë‹¤.
```java
package com.example.cardatabase.service;

import io.jsonwebtoken.Jwts;
import io.jsonwebtoken.SignatureAlgorithm;
import io.jsonwebtoken.security.Keys;
import jakarta.servlet.http.HttpServletRequest;
import org.springframework.http.HttpHeaders;
import org.springframework.stereotype.Component;

import java.security.Key;
import java.util.Date;

@Component
public class JwtService {
    // 1ì¼(ë°€ë¦¬ì´ˆ). ì‹¤ì œ ìš´ì˜ì‹œì—ëŠ” ë” ì§§ì€ê²Œ ë‚«ìŠµë‹ˆë‹¤.
    static final long EXPIRATIONTIME = 86400000;
    static final String PREFIX = "Bearer";

    //ë¹„ë°€í‚¤ ìƒì„±.
    static final Key key = Keys.secretKeyFor(SignatureAlgorithm.HS256);

    // ì„œëª…ì´ ì´ë£¨ì–´ì§„ JWT í† í°ì„ ìƒì„±
    public String getToken(String username) {
        String token = Jwts.builder()
                .setSubject(username)
                .setExpiration(new Date(System.currentTimeMillis() + EXPIRATIONTIME))
                .signWith(key)          // 18 ë²ˆ ë¼ì¸ì— ìƒì„±í•œ ë¹„ë°€í‚¤ë¡œ ì„œëª…
                .compact();
        return token;
    }

    // ìš”ì²­(Request)ì˜ Authorization í—¤ë”ì—ì„œ í† í°ì„ ê°€ì ¸ì˜¨ ë’¤ì— ê·¸ í† í° ë‚´ë¶€ë¥¼ í™•ì¸í•˜ê³ ,
    // usernameì„ ê°€ì§€ê³  ì˜¤ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤.
    public String getAuthUser(HttpServletRequest request) {
        String token = request.getHeader(   // ì´ í´ë˜ìŠ¤ì˜ ê°ì²´ê°€ ì •í™•íˆ ë­”ì§€ëŠ” ëª¨ë¥´ê² ì§€ë§Œ method
                // ëª…ì„ ë´¤ì„ ë•Œ Headerë¥¼ ê°€ì§€ê³  ì˜¨ë‹¤ëŠ” ê²ƒì€ ì•Œ ìˆ˜ ìˆì£ .
                // ì—¬ê¸° HeaderëŠ” postmanì—ì„œ ë³¼ ìˆ˜ ìˆëŠ” headersì— í•´ë‹¹í•©ë‹ˆë‹¤.
                HttpHeaders.AUTHORIZATION
        );
        if (token != null) {
            String user = Jwts.parserBuilder()
                    .setSigningKey(key)
                    .build()
                    .parseClaimsJws(token.replace(PREFIX, ""))
                    .getBody()
                    .getSubject();

            if (user != null) {
                return user;
            }
        }
        return null;
    }
}
```
ì´ìƒì˜ ì½”ë“œ ì“°ëŠ” ê²ƒì—ì„œ ìƒê²¨ë‚œ ë¬¸ì œì  ë¯¸ë¦¬ ì ì–´ë†“ê² ìŠµë‹ˆë‹¤.

build.gradleì—ì„œì˜ jjwt ê´€ë ¨ version ë¶ˆì¼ì¹˜ë¡œ ì¸í•´ì„œ parserBuilder() ë©”ì„œë“œê°€ ë”ì´ìƒ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ë¬¸ì œì ì´ ë°œê²¬ëìŠµë‹ˆë‹¤.

ê·¸ë˜ì„œ 0.11.5ë¡œ ìˆ˜ì •í•˜ì˜€ìŠµë‹ˆë‹¤.

build.gradleì˜ ì˜ì¡´ì„±ì€ ì´ì œ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
```java
dependencies {
	implementation 'org.springframework.boot:spring-boot-starter-web'
	implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
	// Spring Data REST ì˜ì¡´ì„± ì¶”ê°€ ì˜ì—­
	implementation 'org.springframework.boot:spring-boot-starter-data-rest'

	developmentOnly 'org.springframework.boot:spring-boot-devtools'
//	runtimeOnly 'com.h2database:h2'
	runtimeOnly 'org.mariadb.jdbc:mariadb-java-client'
	testImplementation 'org.springframework.boot:spring-boot-starter-test'

	implementation 'org.projectlombok:lombok:1.18.42'
	annotationProcessor 'org.projectlombok:lombok:1.18.42'

	//OpenAPI ëª…ì„¸ì„œ ê´€ë ¨ ì˜ì¡´ì„±
	implementation 'org.springdoc:springdoc-openapi-starter-webmvc-ui:2.0.2'

	// Spring Sercurity ê´€ë ¨ ì˜ì¡´ì„±
	implementation 'org.springframework.boot:spring-boot-starter-security'
	testImplementation 'org.springframework.boot:spring-boot-starter-security'

	// jjwt ê´€ë ¨ ì„¤ì •
	implementation 'io.jsonwebtoken:jjwt-api:0.11.5'
	runtimeOnly 'io.jsonwebtoken:jjwt-impl:0.11.5'
	runtimeOnly 'io.jsonwebtoken:jjwt-jackson:0.11.5'
}
```
ë²„ì „ ë¶ˆì¼ì¹˜ë¡œ ì¸í•œ ì½”ë“œ ì‘ì„± ë°©ì‹ì˜ ë³€ê²½ì€ ë¹ˆë²ˆí•˜ê²Œ ì¼ì–´ë‚˜ëŠ” í¸ì…ë‹ˆë‹¤. ê·¼ë° ìµœì‹  ë²„ì „ì´ LTSë¡œ ë„˜ì–´ê°€ê¸° ì „ê¹Œì§€ëŠ” ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” í¸ì´ ì¢‹ìŠµë‹ˆë‹¤.

ì´ìƒì˜ ì½”ë“œì—ì„œ ì¼ë‹¨ì€ getToken()ì„ í†µí•´ì„œ í† í°ì„ ìƒì„±í•˜ëŠ” ë©”ì„œë“œì™€,
getAuthUser() ë©”ì„œë“œë¥¼ í†µí•´ì„œ í† í°ì„ í™•ì¸í•˜ì—¬ ì„œëª…ëœ userë¥¼ returní•˜ë„ë¡ ì •ì˜í–ˆìŠµë‹ˆë‹¤.

  3. Authenticationì„ ìœ„í•œ ìê²© ì¦ëª… ìì²´ë¥¼ ì €ì¥í•˜ëŠ” í´ë˜ìŠ¤ë¥¼ ì¶”ê°€í•  ì˜ˆì •ì…ë‹ˆë‹¤. ì—¬ê¸°ì„œ Recordë¼ëŠ” ìë£Œí˜•ì„ ì‚¬ìš©í•˜ê¸´ í• ê±´ë°... ë‚´ì¼ í•©ì‹œë‹¤.


ë²„ì „ ìµœì‹ í™”í•´ì„œ ë‹¤ì‹œ ì‘ì„±í•  ì˜ˆì •ì…ë‹ˆë‹¤.

git add .
git commit -m "feat: 20250924 RESTful API / Swagger / Spring Security / JWT"
git push

ìê²© ì¦ëª… ì‚­ì œ
ìë¦¬ ì •ë¦¬